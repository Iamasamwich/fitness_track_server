(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{254:function(e,t,n){},427:function(e,t,n){"use strict";n.r(t);n(253),n(254);var c=n(0),a=n(34),s=n.n(a),r=n(28),i=n(69),o=n(213),u=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.payload;default:return e}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PAGE":return t.payload;default:return e}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SESSIONS":return t.payload;default:return e}},b=Object(i.c)({login:u,page:l,sessions:j}),d=n(23),O=n.n(d),f=n(32),h=n(58),p={url:"https://localhost:3000",options:{headers:{"Content-Type":"application/json"},credentials:"include"}},g=function(){return function(){var e=Object(h.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p.url+"/logout",Object(f.a)(Object(f.a)({},p.options),{},{method:"POST"})).then((function(e){return e.json()}));case 2:200===(n=e.sent).status&&"Logged Out"===n.message&&(t({type:"LOGIN",payload:!1}),t({type:"CHANGE_PAGE",payload:"login"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(h.a)(O.a.mark((function t(n){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(p.url+"/login",Object(f.a)(Object(f.a)({},p.options),{},{method:"POST",body:JSON.stringify(e)})).then((function(e){return e.json()}));case 2:202===(c=t.sent).status&&"Logged In"===c.message?n({type:"LOGIN",payload:!0}):n({type:"LOGIN",payload:!1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(t){t({type:"CHANGE_PAGE",payload:e})}},x=n(9),N=n(4),S=Object(r.b)((function(e){return{login:e.login,page:e.page}}),{logout:g,changePage:v})((function(e){var t=e.login,n=e.logout,a=(e.page,e.changePage),s=Object(c.useState)(!1),r=Object(x.a)(s,2),i=r[0],o=r[1],u=Object(c.useRef)();return Object(c.useEffect)((function(){var e=function(e){u.current&&u.current.contains(e.target)||o(!1)};return document.body.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[]),Object(N.jsxs)("div",{className:"navbar",id:"navbar",children:[t?Object(N.jsx)("div",{children:Object(N.jsx)("i",{className:"home icon large",onClick:function(){return a("login")}})}):null,Object(N.jsxs)("div",{ref:u,className:"ui dropdown",onClick:function(){return o(!i)},children:[Object(N.jsx)("i",{className:"bars icon large"}),Object(N.jsxs)("div",{className:"cust_menu menu transition ".concat(i?"visible active":""),children:[Object(N.jsx)("div",{className:"item",children:"Profile"}),Object(N.jsx)("div",{className:"item",children:"About"}),t?Object(N.jsx)("div",{className:"item",onClick:function(){return n()},children:"Log Out"}):null]})]})]})})),y=Object(r.b)(null,{login:m,changePage:v})((function(e){var t=e.login,n=e.changePage,a=Object(c.useState)("sam@sam.com"),s=Object(x.a)(a,2),r=s[0],i=s[1],o=Object(c.useState)(""),u=Object(x.a)(o,2),l=u[0],j=u[1],b=Object(c.useState)("password"),d=Object(x.a)(b,2),O=d[0],f=d[1],h=Object(c.useState)(""),p=Object(x.a)(h,2),g=p[0],m=p[1],v=Object(c.useState)(!1),S=Object(x.a)(v,2),y=S[0],k=S[1];Object(c.useEffect)((function(){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(r.toLowerCase());e&&O?(j(""),m("")):e&&!O?(j(""),m("error")):!e&&O?(j("error"),m("")):(j("error"),m("error"))}),[r,O]),Object(c.useEffect)((function(){k(!(!l&&!g))}),[l,g]);return Object(N.jsxs)("div",{className:"ui container",children:[Object(N.jsxs)("form",{className:"ui form",onSubmit:function(e){e.preventDefault(),y||t({email:r,pword:O})},children:[Object(N.jsxs)("div",{className:"field ".concat(l),children:[Object(N.jsx)("label",{children:"Email:"}),Object(N.jsx)("input",{type:"text",name:"email",placeholder:"Email...",value:r,onChange:function(e){return i(e.target.value)}})]}),Object(N.jsxs)("div",{className:"field ".concat(g),children:[Object(N.jsx)("label",{children:"Password:"}),Object(N.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:O,onChange:function(e){return f(e.target.value)}})]}),Object(N.jsx)("button",{className:"ui button ".concat(y?"":"positive"),type:"submit",children:"Log In"})]}),Object(N.jsx)("div",{className:"content",children:Object(N.jsx)("p",{className:"fakeLink",onClick:function(){return n("signup")},children:"Create an account"})})]})})),k=Object(r.b)(null,{signUp:function(e){return function(){var t=Object(h.a)(O.a.mark((function t(n){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(p.url+"/signup",Object(f.a)(Object(f.a)({},p.options),{},{method:"POST",body:JSON.stringify(e)})).then((function(e){return e.json()}));case 2:201===(c=t.sent).status&&"User Added"===c.message?n({type:"LOGIN",payload:!0}):(n({type:"LOGIN",payload:!1}),n({type:"CHANGE_PAGE",payload:"signup"}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},changePage:v})((function(e){var t=e.signUp,n=e.changePage,a=Object(c.useState)(""),s=Object(x.a)(a,2),r=s[0],i=s[1],o=Object(c.useState)(""),u=Object(x.a)(o,2),l=u[0],j=u[1],b=Object(c.useState)(""),d=Object(x.a)(b,2),O=d[0],f=d[1],h=Object(c.useState)(""),p=Object(x.a)(h,2),g=p[0],m=p[1],v=Object(c.useState)(""),S=Object(x.a)(v,2),y=S[0],k=S[1],w=Object(c.useState)(""),C=Object(x.a)(w,2),E=C[0],A=C[1],P=Object(c.useState)(""),G=Object(x.a)(P,2),D=G[0],L=G[1],I=Object(c.useState)(""),T=Object(x.a)(I,2),_=T[0],F=T[1],M=Object(c.useState)(!1),K=Object(x.a)(M,2),J=K[0],H=K[1];Object(c.useEffect)((function(){j(r?"":"error")}),[r]),Object(c.useEffect)((function(){/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(O.toLowerCase())?m(""):m("error")}),[O]),Object(c.useEffect)((function(){y&&y===D?(A(""),F("")):y&&y!==D?(A(""),F("error")):y||(A("error"),F("error"),L(""))}),[y,D]),Object(c.useEffect)((function(){H(!!(l||g||E||_))}),[l,g,E,_]);return Object(N.jsx)("div",{className:"ui container",children:Object(N.jsxs)("form",{className:"ui form",onSubmit:function(e){e.preventDefault(),J?console.log("errors, bailing"):t({name:r,email:O,pword:y})},children:[Object(N.jsxs)("div",{className:"field ".concat(l),children:[Object(N.jsx)("label",{children:"What should we call you?"}),Object(N.jsx)("input",{placeholder:"Freddles",type:"text",value:r,onChange:function(e){return i(e.target.value)}})]}),Object(N.jsxs)("div",{className:"field ".concat(g),children:[Object(N.jsx)("label",{children:"Your email?"}),Object(N.jsx)("input",{placeholder:"winifred@email.com",type:"email",value:O,onChange:function(e){return f(e.target.value)}})]}),Object(N.jsxs)("div",{className:"field ".concat(E),children:[Object(N.jsx)("label",{children:"Password"}),Object(N.jsx)("input",{placeholder:"Password",type:"password",value:y,onChange:function(e){return k(e.target.value)}})]}),E?null:Object(N.jsxs)("div",{className:"field ".concat(_),children:[Object(N.jsx)("label",{children:"Confirm password"}),Object(N.jsx)("input",{placeholder:"Confirm password",type:"password",value:D,onChange:function(e){return L(e.target.value)}})]}),J?null:Object(N.jsx)("button",{className:"ui button positive",type:"submit",children:"Sign Up!"}),Object(N.jsx)("button",{className:"ui button red",onClick:function(){return n("login")},children:"Cancel"})]})})})),w=Object(r.b)(null,{changePage:v})((function(e){var t=e.changePage;return Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)("div",{className:"cust_half_height",children:Object(N.jsx)("div",{className:"cust_button",onClick:function(){return t("createSession")},children:"Create A Session"})}),Object(N.jsx)("div",{className:"cust_half_height",children:Object(N.jsx)("div",{className:"cust_button",onClick:function(){return t("viewData")},children:"View Session Data"})})]})})),C=n(214),E=Object(r.b)(null,{changePage:v,createSession:function(e){return function(){var t=Object(h.a)(O.a.mark((function t(n){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("actions/createSession running"),e.date=e.date.split("-").reverse().join("-"),t.next=4,fetch(p.url+"/createSession",Object(f.a)(Object(f.a)({},p.options),{},{method:"POST",body:JSON.stringify(e)})).then((function(e){return e.json()}));case 4:c=t.sent,console.log(c),n({type:"CHANGE_PAGE",payload:m});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.changePage,n=e.createSession,a=function(e){return e<10?"0"+e:e},s=new Date,r=Object(c.useState)(a(s.getDate())+"-"+a(s.getMonth()+1)+"-"+s.getFullYear()),i=Object(x.a)(r,2),o=i[0],u=i[1],l=Object(c.useState)(""),j=Object(x.a)(l,2),b=j[0],d=j[1],O=Object(c.useState)(""),f=Object(x.a)(O,2),h=f[0],p=f[1],g=Object(c.useState)(""),m=Object(x.a)(g,2),v=m[0],S=m[1],y=Object(c.useState)(""),k=Object(x.a)(y,2),w=k[0],E=k[1],A=Object(c.useState)(""),P=Object(x.a)(A,2),G=P[0],D=P[1],L=Object(c.useState)(""),I=Object(x.a)(L,2),T=I[0],_=I[1],F=Object(c.useState)(""),M=Object(x.a)(F,2),K=M[0],J=M[1],H=Object(c.useState)(""),z=Object(x.a)(H,2),U=z[0],W=z[1],Z=Object(c.useState)(""),$=Object(x.a)(Z,2),R=$[0],Y=$[1],B=Object(c.useState)(""),q=Object(x.a)(B,2),V=q[0],Q=q[1],X=Object(c.useState)(""),ee=Object(x.a)(X,2),te=ee[0],ne=ee[1],ce=Object(c.useState)(""),ae=Object(x.a)(ce,2),se=ae[0],re=ae[1],ie=Object(c.useState)(""),oe=Object(x.a)(ie,2),ue=oe[0],le=oe[1],je=Object(c.useState)(!1),be=Object(x.a)(je,2),de=be[0],Oe=be[1];Object(c.useEffect)((function(){/^\d{2}-\d{2}-\d{4}$/.test(o)?d(""):d("error")}),[o]),Object(c.useEffect)((function(){!isNaN(h)&&h>0&&/^[0-9]{0,3}[.]{0,1}[0-9]{0,3}$/.test(h)?S(""):(console.log(typeof h),S("error"))}),[h]),Object(c.useEffect)((function(){(!isNaN(T)||!isNaN(G)||!isNaN(w))&&Number(T)>=0&&Number(G)>=0&&Number(w)>=0&&Number(T)+Number(G)+Number(w)>0?J(""):J("error")}),[T,G,w]),Object(c.useEffect)((function(){!isNaN(U)&&U?Y(""):Y("error")}),[U]),Object(c.useEffect)((function(){ne(V?"":"error")}),[V]),Object(c.useEffect)((function(){se.length>=1?le(""):le("error")}),[se]),Object(c.useEffect)((function(){Oe(!!(b||v||K||R||te||ue))}),[b,v,K,R,te,ue]);return Object(N.jsx)("div",{className:"ui container",children:Object(N.jsxs)("form",{className:"ui form",onSubmit:function(e){e.preventDefault(),de?console.log("errors, bailing..."):(console.log("form submitted"),n({date:o,distance:h,hours:T,mins:G,secs:w,weight:U,route:V,notes:se}))},children:[Object(N.jsxs)("div",{className:"field ".concat(b),children:[Object(N.jsx)("label",{children:"Session Date"}),Object(N.jsx)(C.DateInput,{name:"date",placeholder:"Date",value:o,autoComplete:"off",onChange:function(e,t){t.name;var n=t.value;u(n)},closable:!0})]}),Object(N.jsxs)("div",{className:"field ".concat(v),children:[Object(N.jsx)("label",{children:"Distance (km.mmm)"}),Object(N.jsx)("input",{placeholder:"km.mm",value:h,onChange:function(e){return p(e.target.value)}})]}),Object(N.jsxs)("div",{className:"field time-field ".concat(K),children:[Object(N.jsx)("label",{children:"Session Duration"}),Object(N.jsx)("input",{className:"time-input",type:"number",placeholder:"hh",value:T,onChange:function(e){return _(e.target.value)}}),Object(N.jsx)("span",{children:"h"}),Object(N.jsx)("input",{className:"time-input",type:"number",placeholder:"mm",value:G,onChange:function(e){return D(e.target.value)}}),Object(N.jsx)("span",{children:"m"}),Object(N.jsx)("input",{className:"time-input",type:"number",placeholder:"ss",value:w,onChange:function(e){return E(e.target.value)}}),Object(N.jsx)("span",{children:"s"})]}),Object(N.jsxs)("div",{className:"field ".concat(R),children:[Object(N.jsx)("label",{children:"Weight (kg)"}),Object(N.jsx)("input",{placeholder:"kg",value:U,onChange:function(e){return W(e.target.value)}})]}),Object(N.jsxs)("div",{className:"field ".concat(te),children:[Object(N.jsx)("label",{children:"Route"}),Object(N.jsx)("input",{placeholder:"JBBL and back",value:V,onChange:function(e){return Q(e.target.value)}})]}),Object(N.jsxs)("div",{className:"field ".concat(ue),children:[Object(N.jsx)("label",{children:"Session Notes"}),Object(N.jsx)("input",{placeholder:"Lots of magpies today....",value:se,onChange:function(e){return re(e.target.value)}})]}),!1===de?Object(N.jsx)("button",{className:"ui button positive",type:"submit",children:"Add Session!"}):null,Object(N.jsx)("button",{className:"ui button red",onClick:function(){return t("login")},children:"Cancel"})]})})})),A=n(471),P=n(472),G=n(476),D=n(102),L=n(232),I=n(233),T=n(235),_=Object(r.b)((function(e){return{sessions:e.sessions}}),{getMonthSessions:function(){return function(){var e=Object(h.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("actions/getMonthSesssions running"),e.next=3,fetch(p.url+"/getMonthSessions",Object(f.a)(Object(f.a)({},p.options),{},{method:"GET"})).then((function(e){return e.json()}));case 3:200===(n=e.sent).status&&t({type:"SET_SESSIONS",payload:n.sessions});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getAllSessions:function(){return function(){var e=Object(h.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("actions/getAllSessions running"),e.next=3,fetch(p.url+"/getAllSessions",Object(f.a)(Object(f.a)({},p.options),{},{method:"GET"})).then((function(e){return e.json()}));case 3:200===(n=e.sent).status&&t({type:"SET_SESSIONS",payload:n.sessions});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.sessions,n=e.getMonthSessions,a=e.getAllSessions,s=Object(c.useState)([]),r=Object(x.a)(s,2),i=r[0],o=r[1],u=Object(c.useState)("speed"),l=Object(x.a)(u,2),j=l[0],b=l[1],d=Object(c.useState)("month"),O=Object(x.a)(d,2),f=O[0],h=O[1];Object(c.useEffect)((function(){"month"===f?n():a()}),[a,n,f]),Object(c.useEffect)((function(){t.forEach((function(e){e.unix=new Date(e.date).getTime()})),o(t)}),[t]);var p=function(e){var t=new Date(e);return[t.getDate(),t.getMonth()+1,t.getFullYear()].join("-")},g=function(e,t){var n=t.payload;console.log(n)};return 0===i.length?Object(N.jsx)("div",{children:"Loading"}):Object(N.jsxs)("div",{children:[function(e){var t,n={dataKey:"time",label:"Time (s)",tickCount:3,tickFormatter:function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60);return"".concat(t,"h ").concat(n,"m")}};switch(e){case"time":t=n;break;case"speed":t={dataKey:"speed",label:"Avg. Speed (km/h)",tickCount:5,tickFormatter:function(e){return e}};break;case"weight":t={dataKey:"weight",label:"Weight (kg)",tickCount:3,tickFormatter:function(e){return e}};break;default:t=n}var c=[i[0].unix,i[i.length-1].unix];return Object(N.jsx)(A.a,{width:"100%",height:450,children:Object(N.jsxs)(P.a,{data:i,margin:{top:10,right:10,bottom:100,left:10},children:[Object(N.jsx)(G.a,{}),Object(N.jsx)(D.a,{content:function(e){var t=e.active,n=e.payload;if(e.label,t&&n.length){var c=n[0].payload;return Object(N.jsxs)("div",{className:"custom-tooltip",children:[Object(N.jsx)("p",{className:"label",children:"Date: ".concat(p(c.unix))}),Object(N.jsx)("p",{className:"desc",children:"Distance: ".concat(c.distance,"km")}),Object(N.jsx)("p",{className:"desc",children:"Time: 1h 14m 23s"}),Object(N.jsx)("p",{className:"desc",children:"Avg. Speed: ".concat(c.speed,"km/h")}),Object(N.jsx)("p",{className:"desc",children:"Route: ".concat(c.route)})]})}return null}}),Object(N.jsx)(L.a,{dataKey:"unix",scale:"time",domain:["auto","auto"],tickFormatter:function(e){return p(e)},ticks:[c[0],c[1]],interval:"preserveStartEnd",type:"number",dy:30,angle:85,padding:{left:10,right:10}}),Object(N.jsx)(I.a,{padding:{top:10,bottom:10},yAxisId:"left",orientation:"left",type:"number",domain:["auto","auto"],interval:"preserveStartEnd",label:{value:"Distance (km)",angle:-90,position:"left",fill:"rgba(0, 0, 255, 1)"}}),Object(N.jsx)(T.a,{activeDot:{onClick:g},dataKey:"distance",yAxisId:"left",type:"monotone",stroke:"#0000FF"}),Object(N.jsx)(I.a,{padding:{top:10,bottom:10},yAxisId:"right",orientation:"right",type:"number",domain:["auto","auto"],tickCount:t.tickCount,tickFormatter:function(e){return t.tickFormatter(e)},label:{value:t.label,angle:90,position:"right",fill:"rgba(255, 0, 0, 1"}}),Object(N.jsx)(T.a,{dataKey:t.dataKey,yAxisId:"right",type:"monotone",stroke:"#FF0000"})]})})}(j),function(){var e=function(e){return e===j?"blue":"green"};return Object(N.jsxs)("div",{className:"graph-bottom",children:[Object(N.jsxs)("div",{className:"graph-buttons",children:[Object(N.jsx)("button",{className:"ui button ".concat(e("speed")),onClick:function(e){return b("speed")},children:"Speed"}),Object(N.jsx)("button",{className:"ui button ".concat(e("time")),onClick:function(e){return b("time")},children:"Time"}),Object(N.jsx)("button",{className:"ui button ".concat(e("weight")),onClick:function(e){return b("weight")},children:"Weight"})]}),Object(N.jsx)("div",{children:"month"===f?Object(N.jsx)("button",{className:"ui button green",onClick:function(){return h("all")},children:"Show All"}):Object(N.jsx)("button",{className:"ui button green",onClick:function(){return h("month")},children:"Show 30 days"})})]})}()]})})),F=Object(r.b)((function(e){return{login:e.login,page:e.page}}),{ping:function(){return function(){var e=Object(h.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p.url+"/ping",Object(f.a)(Object(f.a)({},p.options),{},{method:"GET"})).then((function(e){return e.json()}));case 2:200===(n=e.sent).status&&"ok"===n.message?t({type:"LOGIN",payload:!0}):t({type:"LOGIN",payload:!1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},changePage:v,logout:g})((function(e){var t=e.login,n=e.page,a=e.ping;Object(c.useEffect)((function(){console.log("pinging"),a()}),[a]);return Object(N.jsxs)(c.Fragment,{children:[Object(N.jsx)(S,{}),t?function(){switch(n){case"createSession":return Object(N.jsx)(E,{});case"viewData":return Object(N.jsx)(_,{});default:return Object(N.jsx)(w,{})}}():function(){switch(n){case"signup":return Object(N.jsx)(k,{});default:return Object(N.jsx)(y,{})}}()]})})),M=Object(i.d)(b,Object(i.a)(o.a));s.a.render(Object(N.jsx)(r.a,{store:M,children:Object(N.jsx)(F,{})}),document.querySelector("#root"))}},[[427,1,2]]]);
//# sourceMappingURL=main.1b4cf992.chunk.js.map